# AIå·¥å…·é›†éƒ¨ç½²æ€»ç»“

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

AIå·¥å…·é›†æ˜¯ä¸€ä¸ªå‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ï¼ŒåŒ…å«ï¼š
- **å‰ç«¯**: Vue 3 + TypeScript + Vite (éƒ¨ç½²åˆ° `/var/www/ai-tools/dist/`)
- **åç«¯**: Node.js + Express + MySQL (è¿è¡Œåœ¨ç«¯å£3001)
- **æœåŠ¡å™¨**: é˜¿é‡Œäº‘ECS (CentOS 7)
- **åŸŸå**: gjson.com (HTTPS)

## ğŸ“ éƒ¨ç½²æ–‡ä»¶

### å‰ç«¯éƒ¨ç½²
- `deploy.sh` - å‰ç«¯éƒ¨ç½²è„šæœ¬
- éƒ¨ç½²åˆ°: `/var/www/ai-tools/dist/`

### åç«¯éƒ¨ç½²
- `deploy-server.sh` - åç«¯éƒ¨ç½²è„šæœ¬ï¼ˆå·²é›†æˆæ‰€æœ‰ä¿®å¤åŠŸèƒ½ï¼‰
- éƒ¨ç½²åˆ°: `/opt/ai-tools-backend/backend/`
- è¿è¡Œç«¯å£: 3001

### é…ç½®æ–‡ä»¶
- `nginx-gjson.conf` - Nginxé…ç½®æ–‡ä»¶
- `backend/ecosystem.config.js` - PM2é…ç½®æ–‡ä»¶
- `start-backend-prod.sh` - ç”Ÿäº§ç¯å¢ƒå¯åŠ¨è„šæœ¬

## ğŸš€ å¿«é€Ÿéƒ¨ç½²å‘½ä»¤

### å‰ç«¯éƒ¨ç½²
```bash
cd /Users/wangshu/Downloads/work/code/vpn/ai-tools
./deploy.sh
```

### åç«¯éƒ¨ç½²
```bash
cd /Users/wangshu/Downloads/work/code/vpn/ai-tools
./deploy-server.sh
```

## ğŸ”§ éƒ¨ç½²è„šæœ¬åŠŸèƒ½

### deploy-server.sh åŒ…å«åŠŸèƒ½
1. **ç¯å¢ƒæ£€æŸ¥**: Node.jsç‰ˆæœ¬ã€ä¾èµ–å®Œæ•´æ€§
2. **ä»£ç æ‰“åŒ…**: æ’é™¤å¼€å‘ä¾èµ–ï¼Œå‹ç¼©æ‰“åŒ…
3. **æ–‡ä»¶ä¼ è¾“**: ä¸Šä¼ åˆ°æœåŠ¡å™¨
4. **æœåŠ¡å™¨é…ç½®**:
   - å®‰è£…Node.jså’ŒPM2
   - åˆ›å»ºåº”ç”¨ç›®å½•
   - å®‰è£…ç”Ÿäº§ä¾èµ–
   - é…ç½®ç¯å¢ƒå˜é‡
5. **æ•°æ®åº“å¤„ç†**:
   - æ£€æŸ¥MySQLæœåŠ¡
   - æ‰§è¡Œæ•°æ®åº“è¿ç§»
   - éªŒè¯æ•°æ®åº“è¿æ¥
6. **è¿›ç¨‹ç®¡ç†**:
   - ä½¿ç”¨PM2å¯åŠ¨æœåŠ¡
   - é…ç½®è‡ªå¯åŠ¨
   - è®¾ç½®æ—¥å¿—ç®¡ç†
7. **Nginxé…ç½®**:
   - æ›´æ–°APIä»£ç†é…ç½®
   - é…ç½®SSLå’ŒCORS
   - æµ‹è¯•é…ç½®æœ‰æ•ˆæ€§
8. **å¥åº·æ£€æŸ¥**:
   - æœ¬åœ°æœåŠ¡æ£€æŸ¥
   - Nginxä»£ç†æ£€æŸ¥
   - ç«¯å£ç›‘å¬éªŒè¯

## ğŸ“Š æœåŠ¡ç®¡ç†

### PM2 å‘½ä»¤
```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
pm2 status

# æŸ¥çœ‹æ—¥å¿—
pm2 logs ai-tools-backend

# é‡å¯æœåŠ¡
pm2 restart ai-tools-backend

# åœæ­¢æœåŠ¡
pm2 stop ai-tools-backend
```

### å¥åº·æ£€æŸ¥
```bash
# æœ¬åœ°å¥åº·æ£€æŸ¥
curl -f http://localhost:3001/health

# é€šè¿‡Nginxçš„å¥åº·æ£€æŸ¥
curl -f https://gjson.com/api/health
```

## ğŸŒ è®¿é—®åœ°å€

- **å‰ç«¯ç½‘ç«™**: https://gjson.com
- **APIæ¥å£**: https://gjson.com/api/
- **å¥åº·æ£€æŸ¥**: https://gjson.com/api/health

## ğŸ”’ å®‰å…¨é…ç½®

- **SSLè¯ä¹¦**: å·²é…ç½®HTTPS
- **é˜²ç«å¢™**: å¼€æ”¾å¿…è¦ç«¯å£
- **CORS**: é…ç½®è·¨åŸŸè¯·æ±‚
- **é™æµ**: é˜²æ­¢APIæ»¥ç”¨
- **JWTè®¤è¯**: å®‰å…¨çš„ç”¨æˆ·è®¤è¯

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

- **PM2ç›‘æ§**: è¿›ç¨‹çŠ¶æ€å’Œèµ„æºä½¿ç”¨
- **æ—¥å¿—æ–‡ä»¶**: `/var/log/ai-tools-backend/`
- **Nginxæ—¥å¿—**: è®¿é—®å’Œé”™è¯¯æ—¥å¿—
- **ç³»ç»Ÿæ—¥å¿—**: systemdæœåŠ¡æ—¥å¿—

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **ç«¯å£å†²çª**: è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹å’Œè§£å†³
2. **æ•°æ®åº“è¿æ¥**: è‡ªåŠ¨é…ç½®å’Œæµ‹è¯•
3. **Nginxä»£ç†**: è‡ªåŠ¨æ›´æ–°é…ç½®
4. **æœåŠ¡å¯åŠ¨**: è‡ªåŠ¨é‡è¯•å’Œå¥åº·æ£€æŸ¥

### æ£€æŸ¥å‘½ä»¤
```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
ssh user@ip 'pm2 status'

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
ssh user@ip 'pm2 logs ai-tools-backend --err'

# æ£€æŸ¥ç«¯å£ç›‘å¬
ssh user@ip 'netstat -tlnp | grep :3001'

# æµ‹è¯•API
curl -f https://gjson.com/api/health
```

## âœ… éƒ¨ç½²éªŒè¯

éƒ¨ç½²æˆåŠŸååº”è¯¥çœ‹åˆ°ï¼š
- âœ… å‰ç«¯ç½‘ç«™æ­£å¸¸è®¿é—®
- âœ… APIæ¥å£æ­£å¸¸å“åº”
- âœ… å¥åº·æ£€æŸ¥é€šè¿‡
- âœ… æ•°æ®åº“è¿æ¥æ­£å¸¸
- âœ… æœåŠ¡ç¨³å®šè¿è¡Œ

---

**æ³¨æ„**: æ‰€æœ‰ä¸´æ—¶ä¿®å¤æ–‡ä»¶å·²åˆ é™¤ï¼ŒåŠŸèƒ½å·²é›†æˆåˆ°ä¸»éƒ¨ç½²è„šæœ¬ä¸­ã€‚
